<div class="admin-dm-container">
  <h2>Digital Marketers Management</h2>

  <section class="marketers-table">
    <h3>All Marketers</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Referral Code</th>
          <th>Approved</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let m of marketers">
          <td>{{ m.name }}</td>
          <td>{{ m.email }}</td>
          <td>{{ m.referral_code }}</td>
          <td>{{ m.approved ? 'Yes' : 'No' }}</td>
          <td>
            <button *ngIf="!m.approved" (click)="approveMarketer(m.id, true)">Approve</button>
            <button *ngIf="m.approved" (click)="approveMarketer(m.id, false)">Revoke</button>
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="dm-orders-table">
    <h3>All DM Orders</h3>
    <table>
      <thead>
        <tr>
          <th>Marketer</th>
          <th>Referral Code</th>
          <th>User</th>
          <th>Product</th>
          <th>Price</th>
          <th>Commission</th>
          <th>Verified</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let o of dmOrders">
          <td>{{ o.marketer_name }}</td>
          <td>{{ o.referral_code }}</td>
          <td>{{ o.user_name }}</td>
          <td>{{ o.product_title }}</td>
          <td>{{ o.product_price | currency:'XAF':'symbol' }}</td>
          <td>{{ o.commission | currency:'XAF':'symbol' }}</td>
          <td>{{ o.verified ? 'Yes' : 'No' }}</td>
          <td>
            <button *ngIf="!o.verified" (click)="verifyOrder(o.dm_order_id, true)">Verify</button>
            <button *ngIf="o.verified" (click)="verifyOrder(o.dm_order_id, false)">Revoke</button>
          </td>
        </tr>
      </tbody>
    </table>
  </section>
</div>
